<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<title data-react-helmet="true">Project Configuration | Nimbella Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Project Configuration | Nimbella Docs"><meta data-react-helmet="true" name="description" content="Adding project configuration"><meta data-react-helmet="true" property="og:description" content="Adding project configuration"><meta data-react-helmet="true" property="og:url" content="https://niks3089.github.io/docs/docs/configuration"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://niks3089.github.io/docs/docs/configuration"><link rel="stylesheet" href="/docs/styles.a2520ece.css">
<link rel="preload" href="/docs/styles.a20a6309.js" as="script">
<link rel="preload" href="/docs/runtime~main.80f5ba18.js" as="script">
<link rel="preload" href="/docs/main.a1e2a0a5.js" as="script">
<link rel="preload" href="/docs/1.fb0ac71d.js" as="script">
<link rel="preload" href="/docs/2.d4a99579.js" as="script">
<link rel="preload" href="/docs/79.5510b0e3.js" as="script">
<link rel="preload" href="/docs/80.52045ce4.js" as="script">
<link rel="preload" href="/docs/935f2afb.36f64fce.js" as="script">
<link rel="preload" href="/docs/17896441.1a30ac6f.js" as="script">
<link rel="preload" href="/docs/9ed00105.60fdcf8f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/docs/"><img class="navbar__logo" src="/docs/img/logo.svg" alt="Nimbella Docs Logo"><strong class="navbar__title">Nimbella Docs</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nimbella/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img class="navbar__logo" src="/docs/img/logo.svg" alt="Nimbella Docs Logo"><strong class="navbar__title">Nimbella Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/nimbella/docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/whatIsNimbella">What is Nimbella</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/serverless">Why Serverless</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/serverlessVSServer">Serverless Vs Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/servelessApps">Serverless Apps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/whyNimbella">Why Nimbella</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/account">Nimbella Account</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/features">Nimbella Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/openwhisk">Openwhisk</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Nimbella Project</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/deployerOverview">Deployer Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/projects">Project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/namespaces">Namespace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/project">Nimbella Project</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/docs/configuration">Project Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/deployerFeature">Deployer Feature</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/singleAction">Single Action Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/namespaceToProjects">Tieing Namespaces to Projects</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Serverless SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/keyValueSDK">Key Value SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/webSDK">Web SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/objectSDK">Object Store SDK</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Runtime &amp; Languages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/runtime">Runtime and Languages</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/install">Install CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/commands">Nim Commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/flags">Command Flags</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/commandSummary">Command Summary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/wsk">nim vs wsk</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Workbench</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/workbench">Workbench</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/gettingStarted">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/building">Building</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developing and Deploying Serverless APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/agnostic">Developing &amp; Deploying Serverless APIs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/nodejs">NodeJS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/python">Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/java">Java</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/go">GoLang</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developing &amp; Deploying Web</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/web">Developing &amp; Deploying Web</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/webContent">Web Content</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Taking your application to production</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/production">Taking your application to production</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/commander">Commander</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/postman">Postman</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/netlify">Netlify</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Porting existing applications onto Nimbella</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/heroku">Heroku to Nimbella</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/express">Express to Nimbella</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/django">Django to Nimbella</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/flask">Flask to Nimbella</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/lambda">Lambda to Nimbella</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/openwhiskPort">Openwhisk to Nimbella</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/">Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/doc2">Document Number 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/doc3">This is Document Number 3</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/mdx">Powered by MDX</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Project Configuration</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="adding-project-configuration"></a>Adding project configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#adding-project-configuration" title="Direct link to heading">#</a></h2><p>A feature that sets nim projects apart from many other deployment tools is that no manifest or configuration file is required in a large number of suitably simple cases. You can simply choose a directory in the file system to represent a project and lay out the content of the project under that directory using a structure that nim will recognize as a project. See <a href="/docs/docs/singleAction">the no-configuration project example</a>.</p><p>However, Nimbella projects can’t always avoid having a configuration file, so this section summarizes how to add a configuration file to guide nim when the file and directory structure doesn’t convey everything it needs to know.</p><p>To configure a project, create a configuration file called <em>project.yml</em> in the project’s root directory. The configuration file is coded in YAML. There are various online tutorials for YAML if you need to learn more about the YAML language.</p><p>One important fact about YAML is that things to the right of the <code>:</code> separator are given data types according to their appearance.  So, <code>7895.37</code> is taken to be a <em>number</em> and not a string, even though <code>abcd.ef</code> would be parsed as a string. You can always cause values to be taken as strings by quoting them.  E.g. <code>&quot;7895.37&quot;</code> and <code>&quot;abcd.ef&quot;</code> are both strings.  This distinction can be important in cases when dot-separated alphameric values can end up looking like numbers by the accident of having only digits and dots.</p><p>The structure of the information in the <em>project.yml</em> file should follow the structure of the project itself.  If you create the project using <code>nim project create</code> you can optionally request a <em>project.yml</em> to be generated from the start, giving you something to edit.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; nim project create example6 --config</span></div></div></div></div></div><p>The resulting project will have a <em>project.yml</em> with all default values.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">targetNamespace: &#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cleanNamespace: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bucket: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">parameters: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">environment: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">packages:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    shared: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    clean: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    environment: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    parameters: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    annotations: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    actions:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: hello</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        clean: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        binary: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        main: &#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        runtime: &#x27;nodejs:default&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        web: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        webSecure: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        parameters: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        environment: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        annotations: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        limits: {}</span></div></div></div></div></div><p>All of the properties in these examples will be explained below.  You can also hand-edit <em>project.yml</em> from scratch but having an all-defaults template to start from can be helpful.</p><p>The project configuration is merged with what is inferred from file and directory names, so it’s only necessary to put information in the configuration that can’t be inferred from file or directory names or for which the defaults aren’t what you want.  If you generate your <em>project.yml</em> using <code>nim project create</code>, you can remove entries that denote defaults without changing the subsequent behavior.</p><p>We’ll cover configuration for packages and actions first, then configuration for web content, including an example of generated content such as a React web app. Then we’ll cover symbolic variables and file substitution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="project-configuration-for-packages-and-actions"></a>Project configuration for packages and actions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#project-configuration-for-packages-and-actions" title="Direct link to heading">#</a></h3><p>Let’s suppose that in <a href="/docs/docs/singleAction">the example1 project</a>, you don’t want <code>hello</code> to be a web action and the deployer cannot determine its main entry point directly from the code. Add a <em>project.yml</em> file such as the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">packages:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    actions:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: hello</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        web: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        main: myMain</span></div></div></div></div></div><p>The following sections contain a list of configuration members for <a href="#action-modifiers-allowed-in-project-yml">actions</a>, <a href="#package-modifiers-allowed-in-project-yml">packages</a>, and <a href="#global-modifiers-allowed-in-project-yml">global</a>. An additional configuration member is <code>bucket</code> which is documented in <a href="/docs/docs/webContent">Adding static web content</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="action-modifiers-allowed-in-projectyml"></a>Action modifiers allowed in project.yml<a aria-hidden="true" tabindex="-1" class="hash-link" href="#action-modifiers-allowed-in-projectyml" title="Direct link to heading">#</a></h4><p>Here are the action modifiers that are allowed in the configuration.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="web"></a>web<a aria-hidden="true" tabindex="-1" class="hash-link" href="#web" title="Direct link to heading">#</a></h5><p>May be <code>true</code>, <code>false</code> or <code>raw</code>. The default is <code>true</code>.</p><p>The <code>web</code> modifier has the same semantics as it does in <code>nim action create</code>, except for the default. The value <code>yes</code> or <code>true</code> produces a normal web action. The value <code>no</code> or <code>false</code> produces an action that is not a web action. The value <code>raw</code> produces a raw HTTP web action. The default is <code>true</code> if not specified. These behaviors are accomplished via annotations with reserved meanings that are merged with annotations provided by you.</p><p><strong>Note:</strong> See also the <a href="#web-1"><code>web</code></a> modifier on packages.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="runtime"></a>runtime<a aria-hidden="true" tabindex="-1" class="hash-link" href="#runtime" title="Direct link to heading">#</a></h5><p>The runtime to use for the action. It should be in the form &quot;language:version&quot;, for example &quot;python:3&quot; or &quot;language:default&quot;, for example &quot;go:default&quot;. Because of the colon, the string should be quoted, as in these examples.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="main"></a>main<a aria-hidden="true" tabindex="-1" class="hash-link" href="#main" title="Direct link to heading">#</a></h5><p>The main entry point for the action.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="binary"></a>binary<a aria-hidden="true" tabindex="-1" class="hash-link" href="#binary" title="Direct link to heading">#</a></h5><p>May be true or false. The value true indicates the need for base64 encoding when transmitting the action for deployment. Normally this is inferred from the file suffix.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="websecure"></a>webSecure<a aria-hidden="true" tabindex="-1" class="hash-link" href="#websecure" title="Direct link to heading">#</a></h5><p>Note that web actions are normally executable by anyone.  Adding the <code>webSecure</code> flag secures a web action in one of two ways.  If a string value is provided, that string is taken to be a secret that must be provided by invokers of the action.  If the boolean value <code>true</code> is provided, then only users who have valid Nimbella authorization, and provide that authorization in a basic authentication header when invoking the action, will be able to invoke the action.  The value <code>false</code> requests the default behavior for web actions (anyone can execute).</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="annotations"></a>annotations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#annotations" title="Direct link to heading">#</a></h5><p>A nested map providing annotations to place on the action.</p><p>The keys and values of annotations are up to you to create. The important thing is that both clauses are nested maps in YAML terms and can have as many keys and values as needed. See the example in the <a href="#parameters"><code>parameters</code></a> description.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="parameters"></a>parameters<a aria-hidden="true" tabindex="-1" class="hash-link" href="#parameters" title="Direct link to heading">#</a></h5><p>A nested map providing parameters, which are bound to the action and passed on each invocation.</p><p>The keys and values of parameters are up to you to create. The important thing is that both clauses are nested maps in YAML terms and can have as many keys and values as needed.  The following example shows some key-value pairs created for the <code>annotations</code> and <code>parameters</code> modifiers for the <code>hello</code> action in the <code>demo</code> package.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">packages:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    actions:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: hello</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          final: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          sampleAction: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        parameters:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          language: English</span></div></div></div></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="environment"></a>environment<a aria-hidden="true" tabindex="-1" class="hash-link" href="#environment" title="Direct link to heading">#</a></h5><p>A nested map providing parameters that are placed in the environment of the action before each invocation</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="clean"></a>clean<a aria-hidden="true" tabindex="-1" class="hash-link" href="#clean" title="Direct link to heading">#</a></h5><p>May be <code>true</code> or <code>false</code>, indicating whether you want any previous action with the same name to be removed before deploying a new one. The default is <code>false</code>.</p><p>The <code>clean</code> modifier requires some explanation. The deployer installs actions using the update verb, meaning that there is some history maintained in the installed action. The version number is incremented. Parameters and annotations from a previous incarnation will be retained unless changed. The code is always installed anew, however. The <code>clean</code> flag guarantees that the action is built only from the information in the project by erasing any old copy of the action before deploying the new one.</p><p><strong>Notes:</strong></p><ul><li>See also the <a href="#clean-1"><code>clean</code></a> flag on packages and the <a href="#cleannamespace"><code>cleanNamespace</code></a> global flag.</li><li>The <code>clean</code> flags on actions are ignored when the <code>--incremental</code> flag is specified.</li><li>The <code>clean</code> flags on actions are also ignored when deployment of those actions is suppressed through the use of <code>--include</code> or <code>--exclude</code> flags on the command line.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="limits"></a>limits<a aria-hidden="true" tabindex="-1" class="hash-link" href="#limits" title="Direct link to heading">#</a></h5><p>A nested map in which you can set limits for</p><ul><li>the timeout in milliseconds</li><li>memory in megabytes</li><li>log size in kilobytes</li></ul><p>For example</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">packages:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    actions:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: hello</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        limits:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          timeout: 10000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          logs: 10,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          memory: 256,</span></div></div></div></div></div><p>You need not specify all limits if you only wish to specify one or two.  All three of these limits must be numbers and within the range permitted by the Nimbella cloud (use <code>nim info --limits</code> to see the allowed range).  When not specified, Nimbella Cloud defaults are assumed.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="localbuild"></a>localBuild<a aria-hidden="true" tabindex="-1" class="hash-link" href="#localbuild" title="Direct link to heading">#</a></h5><p>If <code>true</code>, specifies that any build done for this action must be local (even if <code>--remote-build</code> is specified).  A request to build remotely will be ignored for this action.  A project containing such an action cannot be deployed from the workbench unless the action is excluded through use of the <code>--exclude</code> or <code>--include</code> flags.  It is illegal to set both this flag and the <code>remoteBuild</code> flag to <code>true</code>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="remotebuild"></a>remoteBuild<a aria-hidden="true" tabindex="-1" class="hash-link" href="#remotebuild" title="Direct link to heading">#</a></h5><p>If <code>true</code>, specifies that any build done for this action must be remote (regardless of whether <code>--remote-build</code> is specified).  It is good to specify this for actions whose build will be incorrect unless done in the environment of the runtime container.  It is illegal to set both this flag and the <code>localBuild</code> flag to <code>true</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="package-modifiers-allowed-in-projectyml"></a>Package modifiers allowed in project.yml<a aria-hidden="true" tabindex="-1" class="hash-link" href="#package-modifiers-allowed-in-projectyml" title="Direct link to heading">#</a></h4><p>The package modifiers that can go in the configuration are as follows.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="shared"></a>shared<a aria-hidden="true" tabindex="-1" class="hash-link" href="#shared" title="Direct link to heading">#</a></h5><p>May be <code>false</code> (default) or <code>true</code>. It indicates that the contents of the package are accessible to other authorized users.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="annotations-1"></a>annotations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#annotations-1" title="Direct link to heading">#</a></h5><p>A nested map providing annotations to place on the package.</p><p>The keys and values of <code>annotations</code> are up to you to create. The important thing is that both clauses are nested maps in YAML terms and can have as many keys and values as needed. See the example in the <a href="#parameters"><code>parameters</code></a> modifier for actions.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="parameters-1"></a>parameters<a aria-hidden="true" tabindex="-1" class="hash-link" href="#parameters-1" title="Direct link to heading">#</a></h5><p>A nested map providing parameters to be bound to all of the actions of the package and passed on each invocation.</p><p>The keys and values of <code>parameters</code> are up to you to create. The important thing is that both clauses are nested maps in YAML terms and can have as many keys and values as needed. See the example in the <a href="#parameters"><code>parameters</code></a> modifier for actions.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="environment-1"></a>environment<a aria-hidden="true" tabindex="-1" class="hash-link" href="#environment-1" title="Direct link to heading">#</a></h5><p>A nested map providing parameters to be placed in the environment of all the actions of the package before each invocation.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="web-1"></a>web<a aria-hidden="true" tabindex="-1" class="hash-link" href="#web-1" title="Direct link to heading">#</a></h5><p>A <code>web</code> modifier to be distributed to all actions of the package that don&#x27;t have their own <code>web</code> modifier.  The same values are accepted as on an action.</p><p><strong>Notes:</strong></p><ul><li>A value of <code>web: true</code> is the same as omitting the modifier since that is the default.</li><li>One use for this modifier is when it is not appropriate to make <em>any</em> actions of a package be web actions, both those that exist now and those you may add in the future.  Just put <code>web: false</code> on the package.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="clean-1"></a>clean<a aria-hidden="true" tabindex="-1" class="hash-link" href="#clean-1" title="Direct link to heading">#</a></h5><p>May be <code>true</code> or <code>false</code>, indicating whether you want any previous package with the same name and all of its contained actions to be removed before deploying a new one. The default is <code>false</code>.</p><p><strong>Notes:</strong></p><ul><li><code>clean</code> at the package level is not the same as specifying clean on each action of the package. At package level, the <code>clean</code> flag removes all actions from the package before deploying, even ones that are not being deployed by the present project. It also removes package parameters and annotations. The <code>clean</code> flag at the package level is only appropriate when you want the project to “own” a particular package outright. See also the <a href="#cleanactions"><code>clean</code></a> flag on actions and the <a href="#cleannamespace"><code>cleanNamespace</code></a> global flag.</li><li>The <code>clean</code> flag on packages is ignored when the <code>--incremental</code> flag is specified.</li><li>The <code>clean</code> flag on packages is also ignored when deployment of those packages is suppressed through the use of <code>--include</code> or <code>--exclude</code> flags on the command line.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="global-modifiers-allowed-in-projectyml"></a>Global modifiers allowed in project.yml<a aria-hidden="true" tabindex="-1" class="hash-link" href="#global-modifiers-allowed-in-projectyml" title="Direct link to heading">#</a></h4><p>There are also some useful global members of the configuration.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="targetnamespace"></a>targetNamespace<a aria-hidden="true" tabindex="-1" class="hash-link" href="#targetnamespace" title="Direct link to heading">#</a></h5><p>Establishes project ownership of namespaces for &#x27;test&#x27; and &#x27;production&#x27; use, as described in <a href="/docs/docs/namespaceToProjects">Tieing Namespaces to Projects</a>.  The simpler form</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">targetNamespace: &lt;myNamespace&gt;</span></div></div></div></div></div><p>is also accepted for compatibility with earlier releases of <code>nim</code>.  It causes deployment to go by default to a given namespace but does not establish ownership.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cleannamespace"></a>cleanNamespace<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cleannamespace" title="Direct link to heading">#</a></h5><p>May be <code>true</code> or <code>false</code> (default). It causes the entire namespace to be cleared of content prior to deployment: actions, package, and web content. Set this option to <code>true</code> only if you intend the project to have total ownership of the namespace.  It can be set initially in a new project using the <code>--clean</code> flag on <code>nim project create</code>.</p><p><strong>Notes:</strong></p><ul><li>See also the <code>clean</code> flag on <a href="#cleanactions">actions</a> and <a href="#cleanpkgs">packages</a>.</li><li>The <code>cleanNamespace</code> global flag is ignored when the <code>--incremental</code> flag is specified.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="parameters-2"></a>parameters<a aria-hidden="true" tabindex="-1" class="hash-link" href="#parameters-2" title="Direct link to heading">#</a></h5><p>A nested map providing parameters to place on every &quot;real&quot; package in the project (those capable of accepting parameters).  The parameters are then distributed by the backend to all the actions that are contained in those packages.</p><p><strong>Note:</strong> The &quot;default&quot; package is not a package in the backend but simply contains the actions that are not in any package.  It is not legal to specify <code>parameters</code> for it and thus <code>parameters</code> at top level do not distribute to it.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="environment-2"></a>environment<a aria-hidden="true" tabindex="-1" class="hash-link" href="#environment-2" title="Direct link to heading">#</a></h5><p>A nested map providing parameters to place on every &quot;real&quot; package in the project such that the parameters go into the environment of actions of the packages.</p><p><strong>Note:</strong> See note under <code>parameters</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="project-configuration-for-web-content"></a>Project configuration for web content<a aria-hidden="true" tabindex="-1" class="hash-link" href="#project-configuration-for-web-content" title="Direct link to heading">#</a></h3><p>The <em>project.yml</em> file can also contain configuration that controls how the web directory and web content is deployed.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="use-the-projectyml-bucket-member-to-configure-how-web-content-is-deployed"></a>Use the project.yml bucket member to configure how web content is deployed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-the-projectyml-bucket-member-to-configure-how-web-content-is-deployed" title="Direct link to heading">#</a></h4><p>Adding a <code>bucket</code> member at the top level of <em>project.yml</em> provides several options for configuring deployment of your web content, as shown in the following example and described in the sections below. All entries are optional.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">bucket:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prefixPath: &quot;chatroom&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  clean: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mainPageSuffix: chatroom.html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  notFoundPage: &quot;error.html&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  strip: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  useCache: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  localBuild: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  remoteBuild: false</span></div></div></div></div></div><p>The following sections have a description of the <code>bucket</code> options shown in this example.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="share-a-nimbella-namespace-with-prefixpath"></a>Share a Nimbella namespace with prefixpath<a aria-hidden="true" tabindex="-1" class="hash-link" href="#share-a-nimbella-namespace-with-prefixpath" title="Direct link to heading">#</a></h5><p>When <code>https://&lt;namespace&gt;-host.nimbella.io</code> is used as a URL with no additional path component, a path of <em>/index.html</em> is assumed, but if your web content doesn’t require being placed at the root of the URL path space, you can allow web content from different projects to share a namespace and a hostname. This is done by using prefix paths to place each project’s web content in a different location. The Nimbella deployer does not rewrite URLs internal to your content, but you can configure prefix paths by adding a <code>prefixPath</code> flag.</p><p>The path specified in <code>prefixpath</code> is prepended to every URL path whenever resources are uploaded. For example, given the examples above, the resource <em>chatroom.html</em> would be deployed to <code>https://&lt;namespace&gt;-host/chatroom/chatroom.html</code>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="delete-previously-deployed-content-when-new-content-is-deployed"></a>Delete previously deployed content when new content is deployed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#delete-previously-deployed-content-when-new-content-is-deployed" title="Direct link to heading">#</a></h5><p>If the <code>clean</code> flag is <code>true</code>, all previously deployed web content is deleted prior to deploying new content. The default is <code>false</code>, in which case previously deployed web content is allowed to remain.</p><p><strong>Tip:</strong> A top-level <code>cleanNamespace: true</code> designation clears both web content and actions prior to a new deployment.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configure-behavior-when-the-url-denotes-a-directory"></a>Configure behavior when the URL denotes a directory<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-behavior-when-the-url-denotes-a-directory" title="Direct link to heading">#</a></h5><p>You can configure which file is served when a URL denotes a directory. By default, the file <em>index.html</em> is served, but you can change the file name with the <code>mainPageSuffix</code> flag.</p><p>In the bucket example above, the file that is opened when the prefix path is <code>chatroom</code> is <em>chatroom.html</em>.</p><p><strong>Notes:</strong></p><ul><li>The deployer doesn’t generate <em>index.html</em> or any other file you name here. You must provide the file as part of the web content.</li><li>The <code>mainPageSuffix</code> option is global to the namespace, so if you deploy multiple web folders into the same namespace using separate projects, either use the same values in all such projects or specify them in only one of the projects. You can obtain more than one namespace from Nimbella to deal with any conflicts that are otherwise hard to resolve.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="specify-the-page-for-a-404-error"></a>Specify the page for a 404 error<a aria-hidden="true" tabindex="-1" class="hash-link" href="#specify-the-page-for-a-404-error" title="Direct link to heading">#</a></h5><p>The <code>notFoundPage</code> option nominates a web page to be used for a URL that does not match any content. The designated page is returned with every 404 Not Found error. If you don’t specify <code>notFoundPage</code>, the default is <em>404.html</em>.</p><p>Nimbella places its own <em>404.html</em> at the root of every namespace and preserves an existing file by that name when deleting web content from the namespace. You can overwrite the provided <em>404.html</em> or leave it there and use a different name for a custom Not Found page. The advantage of using a custom page is that you can easily revert to the Nimbella-provided one by removing the <code>notFoundPage</code> directive.</p><p><strong>Note:</strong> The <code>notFoundPage</code> option is global to the namespace, so if you deploy multiple web folders into the same namespace using separate projects, either use the same values in all such projects or specify them in only one of the projects. You can obtain more than one namespace from Nimbella to deal with any conflicts that are otherwise hard to resolve.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="strip-path-segments"></a>Strip path segments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#strip-path-segments" title="Direct link to heading">#</a></h5><p>The <code>strip</code> option removes path segments, and in this sense, it is the opposite of <code>prefixPath</code>, which adds path segments. The number value specifies the number of paths to strip.</p><p>You can use both <code>strip</code> and <code>prefixPath</code> to remove existing segments and then add new ones. The <code>strip</code> option is most useful when you use a tool to generate web content because often the tool puts its output in a specific directory that you might not want in your deployed namespace. For an example, see <a href="/docs/docs/building#configuration-example-for-web-content-generated-by-a-tool">Example of a web directory with a tool that generates web content</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="specifying-cache-behavior"></a>Specifying cache behavior<a aria-hidden="true" tabindex="-1" class="hash-link" href="#specifying-cache-behavior" title="Direct link to heading">#</a></h5><p>The <code>useCache</code> option, if set to <code>true</code> turns on CDN cacheing and other cacheing for the deployed web content.  When the value is false (the default), web content will be served with a <code>Cache-Control</code> header that suppresses cacheing.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="forcing-local-build-behavior"></a>Forcing local build behavior<a aria-hidden="true" tabindex="-1" class="hash-link" href="#forcing-local-build-behavior" title="Direct link to heading">#</a></h5><p>Use <code>localBuild</code> to force the web build (if any) to be local.  This flag is similar to the <a href="#localBuild">localBuild</a> option for actions, except that it applies to the web build.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="forcing-remote-build-behavior"></a>Forcing remote build behavior<a aria-hidden="true" tabindex="-1" class="hash-link" href="#forcing-remote-build-behavior" title="Direct link to heading">#</a></h5><p>Use <code>remoteBuild</code> to force the web build (if any) to be remote.  This flag is similar to the <a href="#remoteBuild">remoteBuild</a> option for actions, except that it applies to the web build.   Remote builds for web content are always run in the <code>nodejs:default</code> container.  There is no current mechanism to select a different runtime container.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configuration-example-for-web-content-generated-by-a-tool"></a>Configuration example for web content generated by a tool<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration-example-for-web-content-generated-by-a-tool" title="Direct link to heading">#</a></h4><p>Here’s an example of a basic <em>web</em> directory structure when you use a tool to generate web content. Chances are the tool puts its output in a specific directory. Here’s an example diagram of the <em>web</em> directory for an <code>example4</code> project, using React to generate the web content.</p><center><img src="./fig7-nim-examples-project-chat-react-directory-structure.svg" height="550"></center><center>**Figure 6: Project web directory structure for generated web content**</center><p>The <em>web</em> directory contains a <em>.include</em> file and some other files related to building not shown in the diagram. The <em>public</em> and <em>src</em> directories contain the source of the React web application. The <em>build</em> directory is generated by the React build and contains all of the content to be deployed.</p><p>The <em>.include</em> file contains only one line:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">build</span></div></div></div></div></div><p>The <em>project.yml</em> file contains the following content:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Bucket:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  strip: 1</span></div></div></div></div></div><p>The strip option strips one path segment from the deployed web content. See <a href="#strip-path-segments">Strip path segments</a>.</p><p>Deploy as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; nim project deploy chat</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Deploying project &#x27;.../chat&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  to namespace &#x27;...&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  on host &#x27;https://...nimbella.io&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Started running ./build.sh in chat/web</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Finished running ./build.sh in chat/web</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Deployed 25 web content items to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  https://...nimbella.io</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Deployed actions:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - chatadmin/create</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - chatroom/postMessage</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="symbolic-variables"></a>Symbolic variables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#symbolic-variables" title="Direct link to heading">#</a></h3><p>The configuration can contain symbolic variables of the form <code>${SYMBOL}</code> where <code>SYMBOL</code> is chosen by you. The substitutions for these variables are taken from the process environment or optionally from an environment file.  Leading and trailing whitespace is ignored, so <code>${PASSWORD}</code> and <code>${ PASSWORD }</code> or even</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">${</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   PASSWORD</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>have the same meaning.</p><p>The environment file typically takes the form of a properties file that consists of key-value pairs, as in the following example.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">USERID=jane</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PASSWORD=notmyactualpassword</span></div></div></div></div></div><p>The environment file can also be in JSON format as long as it contains a single object to be interpreted as a dictionary.</p><p>You can specify the environment file explicitly on the command line, as in this example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nim project deploy myProject --env test.env</span></div></div></div></div></div><p><strong>Note:</strong> If there is a file named <code>.env</code> located in the root of the project, it will be used as the environment file, and you don’t need the <code>--env</code> option on the command line.</p><p>Substitution occurs as follows:</p><ul><li>If the symbol matches the name of an environment variable, the value of that environment variable is substituted and the environment file, if any, is ignored.</li><li>Otherwise, if there is an environment file and the symbol matches one of its keys, the value paired with that key is substituted.</li><li>Otherwise, the symbol is undefined, resulting in an error indication from nim.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="file-substitution"></a>File substitution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#file-substitution" title="Direct link to heading">#</a></h3><p>File substitution is typically used to set environment, parameters or annotations on an action or package or to set the top-level parameters, such as the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">environment: ${&lt;.environment}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">parameters: ${&lt;.parameters}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">annotations: ${&lt;.annotations}</span></div></div></div></div></div><p>That is, you can “inline” the contents of certain files in certain places in the configuration in <em>project.yml</em>. There are constraints on how file substitution can be used, as explained below.</p><p>Where it is legal, you can request file inclusion by using the <code>&lt;</code> modifier in what otherwise looks like a symbolic variable, for example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">${&lt;.extraConfig}</span></div></div></div></div></div><p>Substitute any valid absolute or relative file system path for <code>extraConfig</code>, providing the path denotes a file. Files are relative to the project directory.</p><p>File substitution can only be used in places where the configuration expects a subdictionary, meaning a closed grouping of key-value pairs under a specific heading like <code>parameters</code>, <code>annotations</code>, or <code>bucket</code>. Here’s an example of a closed grouping:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters: ${&lt;.parameters}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  peerOfParameters:</span></div></div></div></div></div><p>The following example isn’t a closed grouping.  Once you include a file to satisfy the contents of a heading you can&#x27;t add to it.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters: ${&lt;.parameters}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    anotherParameter: value</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Will cause an error</span></div></div></div></div></div><p>The file whose contents are inlined must either contain JSON or be in the form of a properties file with key-value pairs. In other words, it takes the same form as the environment file used in symbol substitution. In fact, the properties file can be the same file as the environment file, but it doesn’t have to be. If it is in the form of a properties file, it will be converted into a shallow dictionary with no nested subdictionaries for the purpose of inclusion. With JSON, you can escape this restriction and have a nested structure. Note that the file is not interpreted as YAML.</p><p><strong>Warning:</strong> All inclusions are processed <em>before</em> the resulting YAML is parsed. For this reason, errors can be obscure when you violate the restrictions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="dictionary-substitution"></a>Dictionary substitution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dictionary-substitution" title="Direct link to heading">#</a></h3><p>Sometimes you may have a large number of parameters across the entire project, but it is wasteful to pass all parameters to all actions (which is what would happen if you used file substitution).  You can use a single environment file (specified on the command line or <code>.env</code> in the project root) and dole out the appropriate parts of it on a per action basis like this.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters: $(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    userid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div></div></div><p>Note the use of <code>$( )</code> rather than <code>${ }</code>.  Dictionary substitution is syntactic sugar for</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    userid: ${userid}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password: ${password}</span></div></div></div></div></div><p>The whitespace separation within the substitution is arbitrary and you could alternatively have used</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters: $(userid password)</span></div></div></div></div></div><p>Single variables can also be used in the dictionary form.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters: $(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div></div></div><p>It is important is that the initial token <code>$(</code> be placed somewhere where the YAML parser expects a subdictionary, the same rule as for file substitution.</p><p><strong>Note:</strong> As with file substitution, dictionary substitution can only be used where the configuration expects a subdictionary, and you can&#x27;t add to it.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/nimbella/docs/edit/master/docs/configuration.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/docs/project"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Nimbella Project</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/docs/deployerFeature"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deployer Feature »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#adding-project-configuration" class="table-of-contents__link">Adding project configuration</a><ul><li><a href="#project-configuration-for-packages-and-actions" class="table-of-contents__link">Project configuration for packages and actions</a></li><li><a href="#project-configuration-for-web-content" class="table-of-contents__link">Project configuration for web content</a></li><li><a href="#symbolic-variables" class="table-of-contents__link">Symbolic variables</a></li><li><a href="#file-substitution" class="table-of-contents__link">File substitution</a></li><li><a href="#dictionary-substitution" class="table-of-contents__link">Dictionary substitution</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/docs/doc2/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/nimbella" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://nimbella.com/slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/nimbella" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/nimbella/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Nimbella, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/styles.a20a6309.js"></script>
<script src="/docs/runtime~main.80f5ba18.js"></script>
<script src="/docs/main.a1e2a0a5.js"></script>
<script src="/docs/1.fb0ac71d.js"></script>
<script src="/docs/2.d4a99579.js"></script>
<script src="/docs/79.5510b0e3.js"></script>
<script src="/docs/80.52045ce4.js"></script>
<script src="/docs/935f2afb.36f64fce.js"></script>
<script src="/docs/17896441.1a30ac6f.js"></script>
<script src="/docs/9ed00105.60fdcf8f.js"></script>
</body>
</html>